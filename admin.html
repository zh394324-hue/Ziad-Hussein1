<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… | Ø§Ù„Ø´ÙŠÙ Ø§Ù„Ø°Ù‡Ø¨ÙŠ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800;900&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --primary: #ff6b35;
            --primary-dark: #e55a2b;
            --secondary: #ff8c42;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
            --dark: #1a1a2e;
            --gray: #6c757d;
            --light: #f8f9fa;
            --white: #ffffff;
            --gradient: linear-gradient(135deg, var(--primary), var(--secondary));
        }
        
        body {
            font-family: 'Cairo', sans-serif;
            background: var(--light);
            min-height: 100vh;
        }
        
        /* Access Denied */
        .access-denied {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--dark), #16213e);
            color: var(--white);
            text-align: center;
            padding: 20px;
        }
        
        .access-denied i {
            font-size: 100px;
            color: var(--danger);
            margin-bottom: 30px;
            display: block;
        }
        
        .access-denied h1 {
            font-size: 36px;
            margin-bottom: 15px;
        }
        
        .access-denied p {
            color: rgba(255,255,255,0.7);
            font-size: 18px;
            margin-bottom: 30px;
        }
        
        .access-denied a {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: var(--gradient);
            color: var(--white);
            padding: 15px 35px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 700;
            transition: all 0.3s;
        }
        
        .access-denied a:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(255,107,53,0.4);
        }
        
        /* Main Admin Panel */
        .admin-panel { display: none; }
        .admin-panel.visible { display: block; }
        
        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 24px;
            border: none;
            border-radius: 12px;
            font-family: inherit;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn:hover { transform: translateY(-2px); }
        .btn:active { transform: scale(0.98); }
        
        .btn-primary { background: var(--gradient); color: var(--white); }
        .btn-success { background: linear-gradient(135deg, var(--success), #20c997); color: var(--white); }
        .btn-danger { background: linear-gradient(135deg, var(--danger), #c82333); color: var(--white); }
        .btn-info { background: linear-gradient(135deg, var(--info), #138496); color: var(--white); }
        .btn-warning { background: linear-gradient(135deg, var(--warning), #e0a800); color: var(--dark); }
        .btn-outline { background: var(--white); color: var(--dark); border: 2px solid #e0e0e0; }
        .btn-outline:hover { border-color: var(--primary); color: var(--primary); }
        .btn-sm { padding: 8px 16px; font-size: 13px; }
        .btn-block { width: 100%; }
        
        /* Layout */
        .app { display: flex; min-height: 100vh; }
        
        /* Sidebar */
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, var(--dark), #16213e);
            color: var(--white);
            position: fixed;
            height: 100vh;
            display: flex;
            flex-direction: column;
            z-index: 100;
            transition: transform 0.3s;
        }
        
        .sidebar-header {
            padding: 25px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .sidebar-logo {
            width: 55px;
            height: 55px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        .sidebar-header h1 { font-size: 20px; font-weight: 800; }
        .sidebar-header small { color: rgba(255,255,255,0.5); font-size: 12px; display: block; }
        
        .sidebar-nav { flex: 1; padding: 20px 15px; overflow-y: auto; }
        
        .nav-label {
            font-size: 11px;
            color: rgba(255,255,255,0.4);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin: 20px 10px 10px;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 18px;
            border-radius: 12px;
            color: rgba(255,255,255,0.7);
            text-decoration: none;
            font-weight: 600;
            font-size: 15px;
            transition: all 0.3s;
            cursor: pointer;
            border: none;
            background: none;
            width: 100%;
            font-family: inherit;
            margin-bottom: 5px;
        }
        
        .nav-item:hover { background: rgba(255,255,255,0.1); color: var(--white); }
        .nav-item.active { background: var(--gradient); color: var(--white); }
        .nav-item i { width: 22px; font-size: 18px; }
        
        .nav-item .badge {
            margin-right: auto;
            background: var(--danger);
            color: var(--white);
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        
        .user-card {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            margin-bottom: 15px;
        }
        
        .user-avatar {
            width: 45px;
            height: 45px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }
        
        .user-info span { display: block; font-size: 14px; font-weight: 700; }
        .user-info small { color: rgba(255,255,255,0.5); font-size: 12px; }
        
        .sidebar-footer a, .sidebar-footer button {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            border-radius: 10px;
            color: rgba(255,255,255,0.6);
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
            border: none;
            background: none;
            width: 100%;
            font-family: inherit;
            font-size: 14px;
            margin-bottom: 5px;
            transition: all 0.3s;
        }
        
        .sidebar-footer a:hover { color: var(--primary); background: rgba(255,255,255,0.05); }
        .sidebar-footer button:hover { color: var(--danger); background: rgba(255,255,255,0.05); }
        
        /* Main */
        .main { flex: 1; margin-right: 280px; }
        
        /* Header */
        .header {
            background: var(--white);
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 20px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 50;
        }
        
        .header-title h2 { font-size: 24px; color: var(--dark); font-weight: 800; }
        .header-title p { color: var(--gray); font-size: 14px; }
        
        .header-actions { display: flex; align-items: center; gap: 15px; }
        
        .notif-btn {
            position: relative;
            width: 50px;
            height: 50px;
            background: var(--light);
            border: none;
            border-radius: 50%;
            font-size: 20px;
            color: var(--gray);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .notif-btn:hover { background: #e0e0e0; color: var(--primary); }
        .notif-btn.has-notif { animation: shake 0.5s ease infinite; }
        
        @keyframes shake {
            0%, 100% { transform: rotate(0); }
            25% { transform: rotate(-15deg); }
            75% { transform: rotate(15deg); }
        }
        
        .notif-badge {
            position: absolute;
            top: -3px;
            right: -3px;
            min-width: 24px;
            height: 24px;
            background: var(--danger);
            color: var(--white);
            font-size: 12px;
            font-weight: 700;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .mobile-toggle {
            display: none;
            width: 50px;
            height: 50px;
            background: var(--light);
            border: none;
            border-radius: 50%;
            font-size: 22px;
            cursor: pointer;
        }
        
        /* Content */
        .content { padding: 30px; }
        
        /* Sections */
        .section { display: none; animation: fadeIn 0.4s ease; }
        .section.active { display: block; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: var(--white);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            gap: 20px;
            transition: all 0.3s;
        }
        
        .stat-card:hover { transform: translateY(-5px); box-shadow: 0 15px 40px rgba(0,0,0,0.1); }
        
        .stat-icon {
            width: 70px;
            height: 70px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
        }
        
        .stat-icon.orange { background: linear-gradient(135deg, #fff5f0, #ffe0d0); color: var(--primary); }
        .stat-icon.green { background: linear-gradient(135deg, #e8f5e9, #c8e6c9); color: var(--success); }
        .stat-icon.blue { background: linear-gradient(135deg, #e3f2fd, #bbdefb); color: var(--info); }
        .stat-icon.purple { background: linear-gradient(135deg, #f3e5f5, #e1bee7); color: #8e24aa; }
        .stat-icon.yellow { background: linear-gradient(135deg, #fffde7, #fff9c4); color: #f9a825; }
        .stat-icon.red { background: linear-gradient(135deg, #ffebee, #ffcdd2); color: var(--danger); }
        
        .stat-info h3 { font-size: 32px; font-weight: 900; color: var(--dark); }
        .stat-info p { color: var(--gray); font-size: 14px; }
        
        /* Card */
        .card {
            background: var(--white);
            border-radius: 20px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.05);
            overflow: hidden;
            margin-bottom: 25px;
        }
        
        .card-header {
            padding: 20px 25px;
            border-bottom: 2px solid var(--light);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .card-header h3 {
            font-size: 18px;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .card-header h3 i { color: var(--primary); }
        .card-body { padding: 25px; }
        .card-filters { display: flex; gap: 12px; flex-wrap: wrap; }
        
        /* Form */
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; font-weight: 700; margin-bottom: 10px; color: var(--dark); font-size: 14px; }
        
        .form-input, .form-select {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-family: inherit;
            font-size: 15px;
            transition: all 0.3s;
        }
        
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 5px rgba(255,107,53,0.1);
        }
        
        /* Order Card */
        .order-card {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            background: var(--light);
            border-radius: 16px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s;
            border-right: 5px solid transparent;
        }
        
        .order-card:hover { transform: translateX(-5px); box-shadow: 0 5px 20px rgba(0,0,0,0.08); }
        .order-card.new { border-right-color: var(--warning); background: #fffbf0; }
        
        .order-info h4 { font-size: 17px; color: var(--dark); margin-bottom: 5px; display: flex; align-items: center; gap: 8px; }
        .order-info p { font-size: 13px; color: var(--gray); }
        .order-meta { text-align: left; }
        .order-meta .price { font-size: 20px; font-weight: 900; color: var(--primary); }
        
        /* Status */
        .status {
            display: inline-block;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 700;
        }
        
        .status-Ø¬Ø¯ÙŠØ¯ { background: #fff3cd; color: #856404; }
        .status-Ù‚ÙŠØ¯_Ø§Ù„ØªØ­Ø¶ÙŠØ± { background: #cce5ff; color: #004085; }
        .status-Ø¬Ø§Ù‡Ø² { background: #d4edda; color: #155724; }
        .status-ØªÙ…_Ø§Ù„ØªÙˆØµÙŠÙ„ { background: #e2e3e5; color: #383d41; }
        .status-Ù…Ù„ØºÙŠ { background: #f8d7da; color: #721c24; }
        
        /* Table */
        .table-wrap { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; }
        
        th {
            text-align: right;
            padding: 16px;
            background: var(--light);
            color: var(--gray);
            font-weight: 700;
            font-size: 13px;
        }
        
        td { padding: 16px; border-bottom: 1px solid #f0f0f0; font-size: 14px; }
        tr:hover td { background: #fafafa; }
        
        .table-actions { display: flex; gap: 8px; }
        
        .table-actions button {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 16px;
        }
        
        .table-actions .view-btn { background: #e3f2fd; color: #1976d2; }
        .table-actions .edit-btn { background: #fff3e0; color: #f57c00; }
        .table-actions .delete-btn { background: #ffebee; color: #c62828; }
        .table-actions button:hover { transform: scale(1.1); }
        
        /* Menu Grid */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }
        
        .menu-item {
            background: var(--light);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s;
        }
        
        .menu-item:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        
        .menu-item img { width: 100%; height: 180px; object-fit: cover; }
        .menu-item-body { padding: 20px; }
        
        .menu-item-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }
        
        .menu-item-header h4 { font-size: 17px; color: var(--dark); }
        
        .menu-item-header .price {
            background: var(--gradient);
            color: var(--white);
            padding: 5px 12px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 700;
        }
        
        .menu-item-cat { color: var(--gray); font-size: 13px; display: flex; align-items: center; gap: 6px; margin-bottom: 15px; }
        
        /* Admin List */
        .admin-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 18px;
            background: var(--light);
            border-radius: 12px;
            margin-bottom: 12px;
            transition: all 0.3s;
        }
        
        .admin-item:hover { box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        
        .admin-item .email {
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .admin-item .email i { color: var(--primary); }
        .admin-item .main-badge { background: var(--gradient); color: var(--white); padding: 4px 12px; border-radius: 20px; font-size: 11px; font-weight: 700; margin-right: 10px; }
        
        /* Activity List */
        .activity-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .activity-item:last-child { border-bottom: none; }
        
        .activity-icon {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }
        
        .activity-icon.visit { background: #e3f2fd; color: #1976d2; }
        .activity-icon.cart { background: #fff3e0; color: #f57c00; }
        .activity-icon.order { background: #e8f5e9; color: #388e3c; }
        .activity-icon.remove { background: #ffebee; color: #c62828; }
        .activity-icon.login { background: #f3e5f5; color: #7b1fa2; }
        
        .activity-info h4 { font-size: 14px; color: var(--dark); margin-bottom: 3px; }
        .activity-info p { font-size: 12px; color: var(--gray); }
        
        /* Settings */
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 25px;
        }
        
        .settings-card {
            background: var(--white);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.05);
        }
        
        .settings-card h3 {
            font-size: 20px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .settings-card h3 i { color: var(--primary); }
        .settings-card.danger { border: 2px solid #ffcdd2; }
        .settings-card.danger h3, .settings-card.danger h3 i { color: var(--danger); }
        
        .danger-actions { display: flex; gap: 15px; flex-wrap: wrap; }
        
        /* Modal */
        .modal {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal.show { display: flex; }
        
        .modal-content {
            background: var(--white);
            border-radius: 24px;
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow: hidden;
            animation: modalIn 0.4s ease;
        }
        
        @keyframes modalIn {
            from { opacity: 0; transform: scale(0.9) translateY(30px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        
        .modal-header {
            padding: 25px;
            background: var(--gradient);
            color: var(--white);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h3 { font-size: 20px; display: flex; align-items: center; gap: 12px; }
        
        .modal-close {
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.2);
            border: none;
            border-radius: 50%;
            color: var(--white);
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .modal-close:hover { background: rgba(255,255,255,0.3); transform: rotate(90deg); }
        
        .modal-body { padding: 25px; max-height: calc(90vh - 100px); overflow-y: auto; }
        
        /* Order Details */
        .order-details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .detail-card {
            background: var(--light);
            padding: 20px;
            border-radius: 16px;
        }
        
        .detail-card h4 {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .detail-card h4 i { color: var(--primary); }
        .detail-card p { font-size: 14px; color: var(--dark); margin-bottom: 5px; }
        
        .order-total-box {
            background: linear-gradient(135deg, #fff5f0, #fff);
            padding: 20px;
            border-radius: 16px;
            text-align: center;
            font-size: 28px;
            font-weight: 900;
            color: var(--primary);
            border: 2px solid #ffe0c2;
            margin: 20px 0;
        }
        
        /* Toast */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--success);
            color: var(--white);
            padding: 18px 35px;
            border-radius: 14px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 5000;
            opacity: 0;
            transition: all 0.4s;
            box-shadow: 0 15px 50px rgba(0,0,0,0.2);
        }
        
        .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }
        .toast.error { background: var(--danger); }
        
        /* Sidebar Overlay */
        .sidebar-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.5);
            z-index: 99;
            display: none;
        }
        
        .sidebar-overlay.show { display: block; }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .sidebar { transform: translateX(100%); width: 300px; }
            .sidebar.open { transform: translateX(0); }
            .main { margin-right: 0; }
            .mobile-toggle { display: flex; align-items: center; justify-content: center; }
        }
        
        @media (max-width: 768px) {
            .header { padding: 15px 20px; }
            .content { padding: 20px; }
            .stats-grid { grid-template-columns: 1fr 1fr; }
            .stat-card { padding: 20px; }
            .stat-icon { width: 55px; height: 55px; font-size: 22px; }
            .stat-info h3 { font-size: 24px; }
            .order-details-grid { grid-template-columns: 1fr; }
            .settings-grid { grid-template-columns: 1fr; }
        }
        
        @media (max-width: 480px) {
            .stats-grid { grid-template-columns: 1fr; }
            .menu-grid { grid-template-columns: 1fr; }
            .settings-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<!-- Access Denied Screen -->
<div class="access-denied" id="accessDenied">
    <div>
        <i class="fas fa-shield-alt"></i>
        <h1>ğŸš« ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ</h1>
        <p>Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ù„Ù„Ù…Ø´Ø±ÙÙŠÙ† ÙÙ‚Ø·. ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø­Ø³Ø§Ø¨ Ù…Ø´Ø±Ù.</p>
        <a href="index.html">
            <i class="fas fa-home"></i>
            Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        </a>
    </div>
</div>

<!-- Admin Panel -->
<div class="admin-panel" id="adminPanel">
    <div class="app">
        <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>
        
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo"><i class="fas fa-utensils"></i></div>
                <div>
                    <h1>Ø§Ù„Ø´ÙŠÙ Ø§Ù„Ø°Ù‡Ø¨ÙŠ</h1>
                    <small>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</small>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-label">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
                <button class="nav-item active" onclick="showSection('dashboard', this)">
                    <i class="fas fa-chart-pie"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                    <span class="badge" id="newOrdersBadge" style="display:none">0</span>
                </button>
                <button class="nav-item" onclick="showSection('orders', this)">
                    <i class="fas fa-clipboard-list"></i> Ø§Ù„Ø·Ù„Ø¨Ø§Øª
                </button>
                <button class="nav-item" onclick="showSection('menu', this)">
                    <i class="fas fa-hamburger"></i> Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø¹Ø§Ù…
                </button>
                
                <div class="nav-label">Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</div>
                <button class="nav-item" onclick="showSection('analytics', this)">
                    <i class="fas fa-chart-line"></i> Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª
                </button>
                <button class="nav-item" onclick="showSection('users', this)">
                    <i class="fas fa-users"></i> Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
                </button>
                <button class="nav-item" onclick="showSection('activities', this)">
                    <i class="fas fa-history"></i> Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·
                </button>
                
                <div class="nav-label">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</div>
                <button class="nav-item" onclick="showSection('admins', this)">
                    <i class="fas fa-user-shield"></i> Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ†
                </button>
                <button class="nav-item" onclick="showSection('settings', this)">
                    <i class="fas fa-cog"></i> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                </button>
            </nav>
            
            <div class="sidebar-footer">
                <div class="user-card">
                    <div class="user-avatar"><i class="fas fa-user"></i></div>
                    <div class="user-info">
                        <span id="adminName">Ø§Ù„Ù…Ø¯ÙŠØ±</span>
                        <small id="adminEmail">admin@chef.com</small>
                    </div>
                </div>
                <a href="index.html"><i class="fas fa-store"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ÙˆÙ‚Ø¹</a>
                <button onclick="logout()"><i class="fas fa-sign-out-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="main">
            <header class="header">
                <button class="mobile-toggle" onclick="toggleSidebar()">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="header-title">
                    <h2 id="pageTitle">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>
                    <p>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ğŸ‘‹</p>
                </div>
                <div class="header-actions">
                    <button class="notif-btn" id="notifBtn" onclick="showSection('orders', document.querySelectorAll('.nav-item')[1])">
                        <i class="fas fa-bell"></i>
                        <span class="notif-badge" id="notifBadge" style="display:none">0</span>
                    </button>
                </div>
            </header>
            
            <div class="content">
                <!-- Dashboard Section -->
                <section class="section active" id="dashboardSection">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon orange"><i class="fas fa-clipboard-list"></i></div>
                            <div class="stat-info">
                                <h3 id="totalOrders">0</h3>
                                <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon green"><i class="fas fa-money-bill-wave"></i></div>
                            <div class="stat-info">
                                <h3 id="totalRevenue">0 Ø±.Ø³</h3>
                                <p>Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon yellow"><i class="fas fa-clock"></i></div>
                            <div class="stat-info">
                                <h3 id="pendingOrders">0</h3>
                                <p>Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon blue"><i class="fas fa-users"></i></div>
                            <div class="stat-info">
                                <h3 id="totalUsers">0</h3>
                                <p>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon purple"><i class="fas fa-eye"></i></div>
                            <div class="stat-info">
                                <h3 id="totalVisits">0</h3>
                                <p>Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon red"><i class="fas fa-shopping-cart"></i></div>
                            <div class="stat-info">
                                <h3 id="cartAdds">0</h3>
                                <p>Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-fire"></i> Ø£Ø­Ø¯Ø« Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h3>
                            <button class="btn btn-primary btn-sm" onclick="showSection('orders', document.querySelectorAll('.nav-item')[1])">
                                Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„
                            </button>
                        </div>
                        <div class="card-body" id="recentOrders"></div>
                    </div>
                </section>
                
                <!-- Orders Section -->
                <section class="section" id="ordersSection">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-list-alt"></i> Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h3>
                            <div class="card-filters">
                                <select class="form-select" id="statusFilter" onchange="filterOrders()" style="width:160px">
                                    <option value="all">ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª</option>
                                    <option value="Ø¬Ø¯ÙŠØ¯">ğŸ†• Ø¬Ø¯ÙŠØ¯</option>
                                    <option value="Ù‚ÙŠØ¯_Ø§Ù„ØªØ­Ø¶ÙŠØ±">ğŸ‘¨â€ğŸ³ Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±</option>
                                    <option value="Ø¬Ø§Ù‡Ø²">âœ… Ø¬Ø§Ù‡Ø²</option>
                                    <option value="ØªÙ…_Ø§Ù„ØªÙˆØµÙŠÙ„">ğŸšš ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„</option>
                                    <option value="Ù…Ù„ØºÙŠ">âŒ Ù…Ù„ØºÙŠ</option>
                                </select>
                                <input type="text" class="form-input" id="searchInput" placeholder="ğŸ” Ø¨Ø­Ø«..." onkeyup="filterOrders()" style="width:200px">
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-wrap" id="ordersTable"></div>
                        </div>
                    </div>
                </section>
                
                <!-- Menu Section -->
                <section class="section" id="menuSection">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-utensils"></i> Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø¹Ø§Ù…</h3>
                            <button class="btn btn-success" onclick="showAddItemModal()">
                                <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="menu-grid" id="menuList"></div>
                        </div>
                    </div>
                </section>
                
                <!-- Analytics Section -->
                <section class="section" id="analyticsSection">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon green"><i class="fas fa-check-double"></i></div>
                            <div class="stat-info">
                                <h3 id="completedOrders">0</h3>
                                <p>Ø·Ù„Ø¨Ø§Øª Ù…ÙƒØªÙ…Ù„Ø©</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon red"><i class="fas fa-times-circle"></i></div>
                            <div class="stat-info">
                                <h3 id="cancelledOrders">0</h3>
                                <p>Ø·Ù„Ø¨Ø§Øª Ù…Ù„ØºÙŠØ©</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon blue"><i class="fas fa-calculator"></i></div>
                            <div class="stat-info">
                                <h3 id="avgOrder">0 Ø±.Ø³</h3>
                                <p>Ù…ØªÙˆØ³Ø· Ø§Ù„Ø·Ù„Ø¨</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon purple"><i class="fas fa-crown"></i></div>
                            <div class="stat-info">
                                <h3 id="topItem">-</h3>
                                <p>Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-chart-bar"></i> Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h3>
                        </div>
                        <div class="card-body" id="orderStats"></div>
                    </div>
                </section>
                
                <!-- Users Section -->
                <section class="section" id="usersSection">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-users"></i> Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†</h3>
                        </div>
                        <div class="card-body">
                            <div class="table-wrap" id="usersTable"></div>
                        </div>
                    </div>
                </section>
                
                <!-- Activities Section -->
                <section class="section" id="activitiesSection">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-history"></i> Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·</h3>
                            <button class="btn btn-outline btn-sm" onclick="clearActivities()">
                                <i class="fas fa-trash"></i> Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„
                            </button>
                        </div>
                        <div class="card-body" id="activitiesList" style="max-height:600px;overflow-y:auto"></div>
                    </div>
                </section>
                
                <!-- Admins Section -->
                <section class="section" id="adminsSection">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-user-shield"></i> Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ†</h3>
                            <button class="btn btn-success" onclick="showAddAdminModal()">
                                <i class="fas fa-user-plus"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ø´Ø±Ù
                            </button>
                        </div>
                        <div class="card-body" id="adminsList"></div>
                    </div>
                    
                    <div class="card" style="margin-top:25px">
                        <div class="card-header">
                            <h3><i class="fas fa-info-circle"></i> Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ù‡Ù…Ø©</h3>
                        </div>
                        <div class="card-body">
                            <p style="color:var(--gray);line-height:2;font-size:15px">
                                <i class="fas fa-check-circle" style="color:var(--success)"></i>
                                Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ† Ø§Ù„Ù…Ø¶Ø§ÙÙŠÙ† Ù‡Ù†Ø§ ÙÙ‚Ø· ÙŠØ¸Ù‡Ø± Ù„Ù‡Ù… Ø²Ø± "Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"<br>
                                <i class="fas fa-bell" style="color:var(--warning)"></i>
                                Ø³ØªØµÙ„Ùƒ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¹Ù†Ø¯ ÙˆØµÙˆÙ„ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯<br>
                                <i class="fas fa-shield-alt" style="color:var(--info)"></i>
                                Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ: zh394324@gmail.com
                            </p>
                        </div>
                    </div>
                </section>
                
                <!-- Settings Section -->
                <section class="section" id="settingsSection">
                    <div class="settings-grid">
                        <div class="settings-card">
                            <h3><i class="fas fa-store"></i> Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø·Ø¹Ù…</h3>
                            <form onsubmit="saveRestaurantInfo(event)">
                                <div class="form-group">
                                    <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù…</label>
                                    <input type="text" class="form-input" id="restaurantName" value="Ø§Ù„Ø´ÙŠÙ Ø§Ù„Ø°Ù‡Ø¨ÙŠ">
                                </div>
                                <div class="form-group">
                                    <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                                    <input type="tel" class="form-input" id="restaurantPhone" value="+966 50 123 4567">
                                </div>
                                <div class="form-group">
                                    <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
                                    <input type="text" class="form-input" id="restaurantAddress" value="Ø´Ø§Ø±Ø¹ Ø§Ù„Ù…Ù„Ùƒ ÙÙ‡Ø¯ØŒ Ø§Ù„Ø±ÙŠØ§Ø¶">
                                </div>
                                <button type="submit" class="btn btn-primary btn-block">
                                    <i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
                                </button>
                            </form>
                        </div>
                        
                        <div class="settings-card danger">
                            <h3><i class="fas fa-exclamation-triangle"></i> Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø®Ø·Ø±</h3>
                            <p style="color:var(--gray);margin-bottom:20px;font-size:14px">âš ï¸ Ù‡Ø°Ù‡ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡Ø§</p>
                            <div class="danger-actions">
                                <button class="btn btn-outline" onclick="clearAllOrders()">
                                    <i class="fas fa-trash"></i> Ø­Ø°Ù ÙƒÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
                                </button>
                                <button class="btn btn-danger" onclick="resetEverything()">
                                    <i class="fas fa-undo"></i> Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ù…ØµÙ†Ø¹
                                </button>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>
</div>

<!-- Order Modal -->
<div class="modal" id="orderModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3><i class="fas fa-receipt"></i> ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨</h3>
            <button class="modal-close" onclick="closeModal('orderModal')">Ã—</button>
        </div>
        <div class="modal-body" id="orderDetails"></div>
    </div>
</div>

<!-- Add Item Modal -->
<div class="modal" id="addItemModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3><i class="fas fa-plus-circle"></i> Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù Ø¬Ø¯ÙŠØ¯</h3>
            <button class="modal-close" onclick="closeModal('addItemModal')">Ã—</button>
        </div>
        <form class="modal-body" onsubmit="addNewItem(event)">
            <div class="form-group">
                <label>Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù</label>
                <input type="text" class="form-input" id="itemName" required placeholder="Ù…Ø«Ø§Ù„: Ø¨Ø±Ø¬Ø± Ù„Ø­Ù…">
            </div>
            <div class="form-group">
                <label>Ø§Ù„Ø³Ø¹Ø± (Ø±.Ø³)</label>
                <input type="number" class="form-input" id="itemPrice" required placeholder="35">
            </div>
            <div class="form-group">
                <label>Ø§Ù„ØªØµÙ†ÙŠÙ</label>
                <select class="form-select" id="itemCategory" required>
                    <option value="burger">ğŸ” Ø¨Ø±Ø¬Ø±</option>
                    <option value="pizza">ğŸ• Ø¨ÙŠØªØ²Ø§</option>
                    <option value="chicken">ğŸ— Ø¯Ø¬Ø§Ø¬</option>
                    <option value="drinks">ğŸ¥¤ Ù…Ø´Ø±ÙˆØ¨Ø§Øª</option>
                </select>
            </div>
            <div class="form-group">
                <label>Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©</label>
                <input type="url" class="form-input" id="itemImage" required placeholder="https://...">
            </div>
            <div class="form-group">
                <label>Ø§Ù„ÙˆØµÙ</label>
                <input type="text" class="form-input" id="itemDesc" required placeholder="ÙˆØµÙ Ù…Ø®ØªØµØ± Ù„Ù„ØµÙ†Ù">
            </div>
            <div style="display:flex;gap:12px;margin-top:25px">
                <button type="submit" class="btn btn-success" style="flex:1">
                    <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ©
                </button>
                <button type="button" class="btn btn-outline" onclick="closeModal('addItemModal')">Ø¥Ù„ØºØ§Ø¡</button>
            </div>
        </form>
    </div>
</div>

<!-- Add Admin Modal -->
<div class="modal" id="addAdminModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3><i class="fas fa-user-plus"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ø´Ø±Ù Ø¬Ø¯ÙŠØ¯</h3>
            <button class="modal-close" onclick="closeModal('addAdminModal')">Ã—</button>
        </div>
        <form class="modal-body" onsubmit="addNewAdmin(event)">
            <div class="form-group">
                <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                <input type="email" class="form-input" id="newAdminEmail" required placeholder="example@email.com">
            </div>
            <p style="color:var(--gray);font-size:13px;margin-bottom:20px">
                <i class="fas fa-info-circle"></i>
                ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù‡Ø°Ø§ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ù…Ø³Ø¬Ù„ ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø£ÙˆÙ„Ø§Ù‹
            </p>
            <div style="display:flex;gap:12px">
                <button type="submit" class="btn btn-success" style="flex:1">
                    <i class="fas fa-user-plus"></i> Ø¥Ø¶Ø§ÙØ©
                </button>
                <button type="button" class="btn btn-outline" onclick="closeModal('addAdminModal')">Ø¥Ù„ØºØ§Ø¡</button>
            </div>
        </form>
    </div>
</div>

<!-- Toast -->
<div class="toast" id="toast">
    <i class="fas fa-check-circle"></i>
    <span id="toastMsg">ØªÙ… Ø¨Ù†Ø¬Ø§Ø­!</span>
</div>

<!-- Audio for notifications -->
<audio id="notifSound" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3" preload="auto"></audio>

<script>
// ========== AUTH CHECK ==========
const currentUser = JSON.parse(localStorage.getItem('chef_current_user'));
const admins = JSON.parse(localStorage.getItem('chef_admins')) || ['zh394324@gmail.com'];

// Check if user is admin
function checkAccess() {
    if (!currentUser || !admins.includes(currentUser.email.toLowerCase())) {
        document.getElementById('accessDenied').style.display = 'flex';
        document.getElementById('adminPanel').classList.remove('visible');
        return false;
    } else {
        document.getElementById('accessDenied').style.display = 'none';
        document.getElementById('adminPanel').classList.add('visible');
        document.getElementById('adminName').textContent = currentUser.name || 'Ø§Ù„Ù…Ø¯ÙŠØ±';
        document.getElementById('adminEmail').textContent = currentUser.email;
        return true;
    }
}

// If not admin, stop here
if (!checkAccess()) {
    console.log('Access denied');
}

// ========== DEFAULT DATA ==========
const defaultMenu = [
    { id: 1, name: 'Ø¨Ø±Ø¬Ø± ÙƒÙ„Ø§Ø³ÙŠÙƒ', price: 35, cat: 'burger', img: 'https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400', desc: 'Ø¨Ø±Ø¬Ø± Ù„Ø­Ù… Ù…Ø¹ Ø¬Ø¨Ù†Ø©' },
    { id: 2, name: 'Ø¨Ø±Ø¬Ø± Ø¯Ø¬Ø§Ø¬', price: 30, cat: 'burger', img: 'https://images.unsplash.com/photo-1606755962773-d324e0a13086?w=400', desc: 'Ø¯Ø¬Ø§Ø¬ Ù…Ù‚Ø±Ù…Ø´' },
    { id: 3, name: 'Ø¨Ø±Ø¬Ø± Ø¯Ø¨Ù„', price: 50, cat: 'burger', img: 'https://images.unsplash.com/photo-1553979459-d2229ba7433b?w=400', desc: 'Ø·Ø¨Ù‚ØªÙŠÙ† Ù„Ø­Ù…' },
    { id: 4, name: 'Ø¨ÙŠØªØ²Ø§ Ù…Ø§Ø±Ø¬Ø±ÙŠØªØ§', price: 45, cat: 'pizza', img: 'https://images.unsplash.com/photo-1574071318508-1cdbab80d002?w=400', desc: 'Ø·Ù…Ø§Ø·Ù… ÙˆÙ…ÙˆØ²Ø§Ø±ÙŠÙ„Ø§' },
    { id: 5, name: 'Ø¨ÙŠØªØ²Ø§ Ø¨ÙŠØ¨Ø±ÙˆÙ†ÙŠ', price: 55, cat: 'pizza', img: 'https://images.unsplash.com/photo-1628840042765-356cda07504e?w=400', desc: 'Ø¨ÙŠØ¨Ø±ÙˆÙ†ÙŠ Ø­Ø§Ø±' },
    { id: 6, name: 'Ø¨ÙŠØªØ²Ø§ Ø³ÙˆØ¨Ø±ÙŠÙ…', price: 65, cat: 'pizza', img: 'https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=400', desc: 'ÙƒÙ„ Ø´ÙŠØ¡' },
    { id: 7, name: 'Ø¯Ø¬Ø§Ø¬ Ù…Ù‚Ù„ÙŠ', price: 45, cat: 'chicken', img: 'https://images.unsplash.com/photo-1626645738196-c2a7c87a8f58?w=400', desc: '8 Ù‚Ø·Ø¹' },
    { id: 8, name: 'Ø£Ø¬Ù†Ø­Ø© Ø­Ø§Ø±Ø©', price: 35, cat: 'chicken', img: 'https://images.unsplash.com/photo-1608039829572-9b0189c96a58?w=400', desc: 'ØµÙ„ØµØ© Ø­Ø§Ø±Ø©' },
    { id: 9, name: 'Ø´Ø§ÙˆØ±Ù…Ø§', price: 25, cat: 'chicken', img: 'https://images.unsplash.com/photo-1529006557810-274b9b2fc783?w=400', desc: 'Ù…Ø¹ Ø§Ù„Ø«ÙˆÙ…ÙŠØ©' },
    { id: 10, name: 'Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„', price: 15, cat: 'drinks', img: 'https://images.unsplash.com/photo-1621506289937-a8e4df240d0b?w=400', desc: 'Ø·Ø§Ø²Ø¬' },
    { id: 11, name: 'Ù…ÙˆÙ‡ÙŠØªÙˆ', price: 18, cat: 'drinks', img: 'https://images.unsplash.com/photo-1551538827-9c037cb4f32a?w=400', desc: 'Ù†Ø¹Ù†Ø§Ø¹ ÙˆÙ„ÙŠÙ…ÙˆÙ†' },
    { id: 12, name: 'Ø³Ù…ÙˆØ°ÙŠ ÙØ±Ø§ÙˆÙ„Ø©', price: 20, cat: 'drinks', img: 'https://images.unsplash.com/photo-1553530666-ba11a7da3888?w=400', desc: 'ÙØ±Ø§ÙˆÙ„Ø© Ø·Ø§Ø²Ø¬Ø©' },
];

const catNames = { burger: 'ğŸ” Ø¨Ø±Ø¬Ø±', pizza: 'ğŸ• Ø¨ÙŠØªØ²Ø§', chicken: 'ğŸ— Ø¯Ø¬Ø§Ø¬', drinks: 'ğŸ¥¤ Ù…Ø´Ø±ÙˆØ¨Ø§Øª' };

// ========== STATE ==========
let menu = JSON.parse(localStorage.getItem('chef_menu')) || defaultMenu;
let orders = JSON.parse(localStorage.getItem('chef_orders')) || [];
let lastOrderCount = orders.length;

// ========== NAVIGATION ==========
function showSection(id, btn) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    document.getElementById(id + 'Section').classList.add('active');
    if (btn) btn.classList.add('active');
    
    const titles = {
        dashboard: 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',
        orders: 'Ø§Ù„Ø·Ù„Ø¨Ø§Øª',
        menu: 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø¹Ø§Ù…',
        analytics: 'Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª',
        users: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',
        activities: 'Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·',
        admins: 'Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ†',
        settings: 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª'
    };
    document.getElementById('pageTitle').textContent = titles[id];
    
    if (window.innerWidth <= 1200) toggleSidebar();
    
    if (id === 'dashboard') loadDashboard();
    if (id === 'orders') loadOrders();
    if (id === 'menu') loadMenu();
    if (id === 'analytics') loadAnalytics();
    if (id === 'users') loadUsers();
    if (id === 'activities') loadActivities();
    if (id === 'admins') loadAdmins();
}

function toggleSidebar() {
    document.getElementById('sidebar').classList.toggle('open');
    document.getElementById('sidebarOverlay').classList.toggle('show');
}

// ========== DASHBOARD ==========
function loadDashboard() {
    orders = JSON.parse(localStorage.getItem('chef_orders')) || [];
    const users = JSON.parse(localStorage.getItem('chef_users')) || [];
    const visits = JSON.parse(localStorage.getItem('chef_visits')) || [];
    const activities = JSON.parse(localStorage.getItem('chef_activities')) || [];
    
    const total = orders.length;
    const revenue = orders.filter(o => o.status !== 'Ù…Ù„ØºÙŠ').reduce((s, o) => s + o.total, 0);
    const pending = orders.filter(o => o.status === 'Ø¬Ø¯ÙŠØ¯').length;
    const cartAdds = activities.filter(a => a.type === 'Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©').length;
    
    document.getElementById('totalOrders').textContent = total;
    document.getElementById('totalRevenue').textContent = revenue.toLocaleString() + ' Ø±.Ø³';
    document.getElementById('pendingOrders').textContent = pending;
    document.getElementById('totalUsers').textContent = users.length;
    document.getElementById('totalVisits').textContent = visits.length;
    document.getElementById('cartAdds').textContent = cartAdds;
    
    updateNotifBadge(pending);
    
    document.getElementById('recentOrders').innerHTML = orders.slice(0, 5).length ? orders.slice(0, 5).map(o => 
        `<div class="order-card ${o.status === 'Ø¬Ø¯ÙŠØ¯' ? 'new' : ''}" onclick="viewOrder(${o.id})">
            <div class="order-info">
                <h4><i class="fas fa-user"></i> ${o.customer.name}</h4>
                <p><i class="fas fa-clock"></i> ${o.date}</p>
            </div>
            <div class="order-meta">
                <div class="price">${o.total} Ø±.Ø³</div>
                <span class="status status-${o.status}">${o.status.replace('_', ' ')}</span>
            </div>
        </div>`
    ).join('') : '<p style="text-align:center;color:var(--gray);padding:50px">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¨Ø¹Ø¯ ğŸ“­</p>';
}

function updateNotifBadge(count) {
    const badge = document.getElementById('notifBadge');
    const navBadge = document.getElementById('newOrdersBadge');
    const btn = document.getElementById('notifBtn');
    
    badge.textContent = count;
    badge.style.display = count > 0 ? 'flex' : 'none';
    
    navBadge.textContent = count;
    navBadge.style.display = count > 0 ? 'inline' : 'none';
    
    btn.classList.toggle('has-notif', count > 0);
}

// ========== ORDERS ==========
function loadOrders() {
    orders = JSON.parse(localStorage.getItem('chef_orders')) || [];
    filterOrders();
}

function filterOrders() {
    const status = document.getElementById('statusFilter').value;
    const search = document.getElementById('searchInput').value.toLowerCase();
    
    let filtered = orders;
    if (status !== 'all') filtered = filtered.filter(o => o.status === status);
    if (search) filtered = filtered.filter(o => 
        o.customer.name.includes(search) || 
        o.customer.phone.includes(search) ||
        o.id.toString().includes(search)
    );
    
    document.getElementById('ordersTable').innerHTML = filtered.length ? `
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
                    <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
                    <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
                    <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                    <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                    <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                </tr>
            </thead>
            <tbody>
                ${filtered.map(o => `
                    <tr style="${o.status === 'Ø¬Ø¯ÙŠØ¯' ? 'background:#fffbf0' : ''}">
                        <td><strong>#${o.id.toString().slice(-4)}</strong></td>
                        <td>${o.customer.name}</td>
                        <td dir="ltr">${o.customer.phone}</td>
                        <td><strong style="color:var(--primary)">${o.total} Ø±.Ø³</strong></td>
                        <td>
                            <select class="status status-${o.status}" onchange="updateOrderStatus(${o.id}, this.value)" style="border:none;cursor:pointer;font-weight:700;padding:8px 12px;border-radius:20px">
                                <option value="Ø¬Ø¯ÙŠØ¯" ${o.status === 'Ø¬Ø¯ÙŠØ¯' ? 'selected' : ''}>ğŸ†• Ø¬Ø¯ÙŠØ¯</option>
                                <option value="Ù‚ÙŠØ¯_Ø§Ù„ØªØ­Ø¶ÙŠØ±" ${o.status === 'Ù‚ÙŠØ¯_Ø§Ù„ØªØ­Ø¶ÙŠØ±' ? 'selected' : ''}>ğŸ‘¨â€ğŸ³ Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±</option>
                                <option value="Ø¬Ø§Ù‡Ø²" ${o.status === 'Ø¬Ø§Ù‡Ø²' ? 'selected' : ''}>âœ… Ø¬Ø§Ù‡Ø²</option>
                                <option value="ØªÙ…_Ø§Ù„ØªÙˆØµÙŠÙ„" ${o.status === 'ØªÙ…_Ø§Ù„ØªÙˆØµÙŠÙ„' ? 'selected' : ''}>ğŸšš ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„</option>
                                <option value="Ù…Ù„ØºÙŠ" ${o.status === 'Ù…Ù„ØºÙŠ' ? 'selected' : ''}>âŒ Ù…Ù„ØºÙŠ</option>
                            </select>
                        </td>
                        <td style="font-size:12px;color:var(--gray)">${o.date}</td>
                        <td>
                            <div class="table-actions">
                                <button class="view-btn" onclick="viewOrder(${o.id})" title="Ø¹Ø±Ø¶"><i class="fas fa-eye"></i></button>
                                <button class="delete-btn" onclick="deleteOrder(${o.id})" title="Ø­Ø°Ù"><i class="fas fa-trash"></i></button>
                            </div>
                        </td>
                    </tr>
                `).join('')}
            </tbody>
        </table>
    ` : '<p style="text-align:center;color:var(--gray);padding:50px">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª ğŸ“­</p>';
}

function updateOrderStatus(id, status) {
    const order = orders.find(o => o.id === id);
    if (order) {
        order.status = status;
        localStorage.setItem('chef_orders', JSON.stringify(orders));
        showToast('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© âœ“');
        filterOrders();
        loadDashboard();
    }
}

function viewOrder(id) {
    const o = orders.find(x => x.id === id);
    if (!o) return;
    
    document.getElementById('orderDetails').innerHTML = `
        <div class="order-details-grid">
            <div class="detail-card">
                <h4><i class="fas fa-user"></i> Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</h4>
                <p><strong>Ø§Ù„Ø§Ø³Ù…:</strong> ${o.customer.name}</p>
                <p><strong>Ø§Ù„Ù‡Ø§ØªÙ:</strong> ${o.customer.phone}</p>
                <p><strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${o.customer.address}</p>
                <p><strong>Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„:</strong> ${o.customer.email || 'Ø²Ø§Ø¦Ø±'}</p>
            </div>
            <div class="detail-card">
                <h4><i class="fas fa-info-circle"></i> Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ù„Ø¨</h4>
                <p><strong>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨:</strong> #${o.id.toString().slice(-4)}</p>
                <p><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${o.date}</p>
                <p><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> <span class="status status-${o.status}">${o.status.replace('_', ' ')}</span></p>
            </div>
        </div>
        ${o.notes ? `<div style="background:#fff3cd;padding:15px;border-radius:12px;margin-bottom:15px"><i class="fas fa-comment"></i> <strong>Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</strong> ${o.notes}</div>` : ''}
        <table style="margin-bottom:15px">
            <thead><tr><th>Ø§Ù„ØµÙ†Ù</th><th>Ø§Ù„ÙƒÙ…ÙŠØ©</th><th>Ø§Ù„Ø³Ø¹Ø±</th><th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th></tr></thead>
            <tbody>
                ${o.items.map(i => `<tr><td>${i.name}</td><td>${i.qty}</td><td>${i.price} Ø±.Ø³</td><td><strong>${i.price * i.qty} Ø±.Ø³</strong></td></tr>`).join('')}
            </tbody>
        </table>
        <div class="order-total-box">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${o.total} Ø±.Ø³</div>
        <div style="display:flex;gap:12px">
            <button class="btn btn-info" style="flex:1" onclick="printOrder(${o.id})"><i class="fas fa-print"></i> Ø·Ø¨Ø§Ø¹Ø©</button>
            <button class="btn btn-danger" onclick="deleteOrder(${o.id});closeModal('orderModal')"><i class="fas fa-trash"></i></button>
        </div>
    `;
    document.getElementById('orderModal').classList.add('show');
}

function deleteOrder(id) {
    if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨ØŸ ğŸ—‘ï¸')) {
        orders = orders.filter(o => o.id !== id);
        localStorage.setItem('chef_orders', JSON.stringify(orders));
        showToast('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨ âœ“');
        loadDashboard();
        filterOrders();
    }
}

function printOrder(id) {
    const o = orders.find(x => x.id === id);
    if (!o) return;
    const w = window.open('', '_blank');
    w.document.write(`<!DOCTYPE html><html dir="rtl"><head><title>Ø·Ù„Ø¨ #${o.id.toString().slice(-4)}</title>
        <style>body{font-family:Arial,sans-serif;padding:20px;max-width:400px;margin:0 auto}table{width:100%;border-collapse:collapse;margin:15px 0}th,td{border:1px solid #ddd;padding:10px;text-align:right}th{background:#f5f5f5}h1{color:#ff6b35;text-align:center}.total{font-size:22px;font-weight:bold;color:#ff6b35;text-align:center;padding:15px;background:#fff5f0;border-radius:10px;margin:15px 0}</style></head>
        <body>
        <h1>ğŸ” Ø§Ù„Ø´ÙŠÙ Ø§Ù„Ø°Ù‡Ø¨ÙŠ</h1>
        <hr>
        <p><strong>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨:</strong> #${o.id.toString().slice(-4)}</p>
        <p><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${o.date}</p>
        <p><strong>Ø§Ù„Ø¹Ù…ÙŠÙ„:</strong> ${o.customer.name}</p>
        <p><strong>Ø§Ù„Ù‡Ø§ØªÙ:</strong> ${o.customer.phone}</p>
        <p><strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${o.customer.address}</p>
        ${o.notes ? `<p><strong>Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</strong> ${o.notes}</p>` : ''}
        <table>
            <tr><th>Ø§Ù„ØµÙ†Ù</th><th>Ø§Ù„ÙƒÙ…ÙŠØ©</th><th>Ø§Ù„Ø³Ø¹Ø±</th><th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th></tr>
            ${o.items.map(i => `<tr><td>${i.name}</td><td>${i.qty}</td><td>${i.price}</td><td>${i.price * i.qty} Ø±.Ø³</td></tr>`).join('')}
        </table>
        <div class="total">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${o.total} Ø±.Ø³</div>
        <hr>
        <p style="text-align:center">Ø´ÙƒØ±Ø§Ù‹ Ù„Ø§Ø®ØªÙŠØ§Ø±ÙƒÙ… Ø§Ù„Ø´ÙŠÙ Ø§Ù„Ø°Ù‡Ø¨ÙŠ! ğŸ”â¤ï¸</p>
        </body></html>`);
    w.document.close();
    w.print();
}

// ========== MENU ==========
function loadMenu() {
    menu = JSON.parse(localStorage.getItem('chef_menu')) || defaultMenu;
    document.getElementById('menuList').innerHTML = menu.map(i => 
        `<div class="menu-item">
            <img src="${i.img}" alt="${i.name}">
            <div class="menu-item-body">
                <div class="menu-item-header">
                    <h4>${i.name}</h4>
                    <span class="price">${i.price} Ø±.Ø³</span>
                </div>
                <div class="menu-item-cat"><i class="fas fa-tag"></i> ${catNames[i.cat]}</div>
                <button class="btn btn-danger btn-sm btn-block" onclick="deleteMenuItem(${i.id})">
                    <i class="fas fa-trash"></i> Ø­Ø°Ù
                </button>
            </div>
        </div>`
    ).join('');
}

function showAddItemModal() { document.getElementById('addItemModal').classList.add('show'); }

function addNewItem(e) {
    e.preventDefault();
    menu.push({
        id: Date.now(),
        name: document.getElementById('itemName').value,
        price: parseInt(document.getElementById('itemPrice').value),
        cat: document.getElementById('itemCategory').value,
        img: document.getElementById('itemImage').value,
        desc: document.getElementById('itemDesc').value
    });
    localStorage.setItem('chef_menu', JSON.stringify(menu));
    closeModal('addItemModal');
    e.target.reset();
    loadMenu();
    showToast('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙ†Ù âœ“');
}

function deleteMenuItem(id) {
    if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØµÙ†ÙØŸ ğŸ—‘ï¸')) {
        menu = menu.filter(i => i.id !== id);
        localStorage.setItem('chef_menu', JSON.stringify(menu));
        loadMenu();
        showToast('ØªÙ… Ø­Ø°Ù Ø§Ù„ØµÙ†Ù âœ“');
    }
}

// ========== ANALYTICS ==========
function loadAnalytics() {
    orders = JSON.parse(localStorage.getItem('chef_orders')) || [];
    
    const completed = orders.filter(o => o.status === 'ØªÙ…_Ø§Ù„ØªÙˆØµÙŠÙ„').length;
    const cancelled = orders.filter(o => o.status === 'Ù…Ù„ØºÙŠ').length;
    const validOrders = orders.filter(o => o.status !== 'Ù…Ù„ØºÙŠ');
    const avgOrder = validOrders.length > 0 ? Math.round(validOrders.reduce((s, o) => s + o.total, 0) / validOrders.length) : 0;
    
    const itemCounts = {};
    orders.forEach(o => {
        o.items.forEach(i => {
            itemCounts[i.name] = (itemCounts[i.name] || 0) + i.qty;
        });
    });
    const topItem = Object.entries(itemCounts).sort((a, b) => b[1] - a[1])[0];
    
    document.getElementById('completedOrders').textContent = completed;
    document.getElementById('cancelledOrders').textContent = cancelled;
    document.getElementById('avgOrder').textContent = avgOrder + ' Ø±.Ø³';
    document.getElementById('topItem').textContent = topItem ? topItem[0] : '-';
    
    const statusCounts = {
        'Ø¬Ø¯ÙŠØ¯': orders.filter(o => o.status === 'Ø¬Ø¯ÙŠØ¯').length,
        'Ù‚ÙŠØ¯_Ø§Ù„ØªØ­Ø¶ÙŠØ±': orders.filter(o => o.status === 'Ù‚ÙŠØ¯_Ø§Ù„ØªØ­Ø¶ÙŠØ±').length,
        'Ø¬Ø§Ù‡Ø²': orders.filter(o => o.status === 'Ø¬Ø§Ù‡Ø²').length,
        'ØªÙ…_Ø§Ù„ØªÙˆØµÙŠÙ„': completed,
        'Ù…Ù„ØºÙŠ': cancelled
    };
    
    document.getElementById('orderStats').innerHTML = `
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px">
            ${Object.entries(statusCounts).map(([status, count]) => `
                <div style="background:var(--light);padding:20px;border-radius:12px;text-align:center">
                    <div style="font-size:28px;font-weight:900;color:var(--dark)">${count}</div>
                    <div class="status status-${status}" style="margin-top:10px">${status.replace('_', ' ')}</div>
                </div>
            `).join('')}
        </div>
    `;
}

// ========== USERS ==========
function loadUsers() {
    const users = JSON.parse(localStorage.getItem('chef_users')) || [];
    
    document.getElementById('usersTable').innerHTML = users.length ? `
        <table>
            <thead>
                <tr>
                    <th>Ø§Ù„Ø§Ø³Ù…</th>
                    <th>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</th>
                    <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
                    <th>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„</th>
                    <th>Ø§Ù„Ø·Ù„Ø¨Ø§Øª</th>
                </tr>
            </thead>
            <tbody>
                ${users.map(u => {
                    const userOrders = orders.filter(o => o.customer.email === u.email).length;
                    return `
                        <tr>
                            <td><strong>${u.name}</strong></td>
                            <td>${u.email}</td>
                            <td dir="ltr">${u.phone || '-'}</td>
                            <td style="font-size:12px;color:var(--gray)">${u.createdAt || '-'}</td>
                            <td><span style="background:var(--light);padding:5px 12px;border-radius:20px;font-weight:700">${userOrders}</span></td>
                        </tr>
                    `;
                }).join('')}
            </tbody>
        </table>
    ` : '<p style="text-align:center;color:var(--gray);padding:50px">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ø³Ø¬Ù„ÙŠÙ† ğŸ‘¥</p>';
}

// ========== ACTIVITIES ==========
function loadActivities() {
    const activities = JSON.parse(localStorage.getItem('chef_activities')) || [];
    
    const iconMap = {
        'Ø²ÙŠØ§Ø±Ø©': 'visit',
        'Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©': 'cart',
        'Ø­Ø°Ù Ù…Ù† Ø§Ù„Ø³Ù„Ø©': 'remove',
        'Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯': 'order',
        'ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„': 'login',
        'ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯': 'login',
        'ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬': 'login'
    };
    
    document.getElementById('activitiesList').innerHTML = activities.length ? activities.slice(0, 100).map(a => `
        <div class="activity-item">
            <div class="activity-icon ${iconMap[a.type] || 'visit'}">
                <i class="fas fa-${a.type === 'Ø²ÙŠØ§Ø±Ø©' ? 'eye' : a.type.includes('Ø³Ù„Ø©') ? 'shopping-cart' : a.type === 'Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯' ? 'receipt' : 'user'}"></i>
            </div>
            <div class="activity-info">
                <h4>${a.type} ${a.data.item ? '- ' + a.data.item : ''} ${a.data.total ? '(' + a.data.total + ' Ø±.Ø³)' : ''}</h4>
                <p><i class="fas fa-user"></i> ${a.user} &nbsp; <i class="fas fa-clock"></i> ${a.date}</p>
            </div>
        </div>
    `).join('') : '<p style="text-align:center;color:var(--gray);padding:50px">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†Ø´Ø§Ø· Ø¨Ø¹Ø¯ ğŸ“Š</p>';
}

function clearActivities() {
    if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·ØŸ')) {
        localStorage.removeItem('chef_activities');
        loadActivities();
        showToast('ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„ âœ“');
    }
}

// ========== ADMINS ==========
function loadAdmins() {
    const adminsList = JSON.parse(localStorage.getItem('chef_admins')) || ['zh394324@gmail.com'];
    document.getElementById('adminsList').innerHTML = adminsList.map((email, i) => 
        `<div class="admin-item">
            <div>
                <span class="email"><i class="fas fa-envelope"></i> ${email}</span>
                ${email === 'zh394324@gmail.com' ? '<span class="main-badge">Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</span>' : ''}
            </div>
            ${email !== 'zh394324@gmail.com' ? `<button class="btn btn-danger btn-sm" onclick="removeAdmin('${email}')"><i class="fas fa-trash"></i></button>` : ''}
        </div>`
    ).join('');
}

function showAddAdminModal() { document.getElementById('addAdminModal').classList.add('show'); }

function addNewAdmin(e) {
    e.preventDefault();
    const email = document.getElementById('newAdminEmail').value.toLowerCase();
    const adminsList = JSON.parse(localStorage.getItem('chef_admins')) || ['zh394324@gmail.com'];
    
    if (adminsList.includes(email)) {
        showToast('Ù‡Ø°Ø§ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„!', 'error');
        return;
    }
    
    adminsList.push(email);
    localStorage.setItem('chef_admins', JSON.stringify(adminsList));
    closeModal('addAdminModal');
    e.target.reset();
    loadAdmins();
    showToast('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø´Ø±Ù âœ“');
}

function removeAdmin(email) {
    if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙØŸ ğŸ—‘ï¸')) {
        let adminsList = JSON.parse(localStorage.getItem('chef_admins')) || ['zh394324@gmail.com'];
        adminsList = adminsList.filter(a => a !== email);
        localStorage.setItem('chef_admins', JSON.stringify(adminsList));
        loadAdmins();
        showToast('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±Ù âœ“');
    }
}

// ========== SETTINGS ==========
function saveRestaurantInfo(e) {
    e.preventDefault();
    localStorage.setItem('chef_restaurant_info', JSON.stringify({
        name: document.getElementById('restaurantName').value,
        phone: document.getElementById('restaurantPhone').value,
        address: document.getElementById('restaurantAddress').value
    }));
    showToast('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª âœ“');
}

function clearAllOrders() {
    if (confirm('âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§ØªØŸ\nÙ‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!')) {
        localStorage.removeItem('chef_orders');
        orders = [];
        loadDashboard();
        filterOrders();
        showToast('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª âœ“');
    }
}

function resetEverything() {
    if (confirm('âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· ÙƒÙ„ Ø´ÙŠØ¡ØŸ\n\nØ³ÙŠØªÙ… Ø­Ø°Ù:\n- Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª\n- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø¹Ø§Ù…\n- Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†\n- Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·')) {
        const mainAdmin = 'zh394324@gmail.com';
        localStorage.clear();
        localStorage.setItem('chef_admins', JSON.stringify([mainAdmin]));
        showToast('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ù…ØµÙ†Ø¹ âœ“');
        setTimeout(() => location.href = 'index.html', 1500);
    }
}

// ========== HELPERS ==========
function closeModal(id) { document.getElementById(id).classList.remove('show'); }
function logout() { localStorage.removeItem('chef_current_user'); window.location.href = 'index.html'; }

function showToast(msg, type = 'success') {
    const toast = document.getElementById('toast');
    toast.className = 'toast show ' + (type === 'error' ? 'error' : '');
    toast.querySelector('i').className = type === 'error' ? 'fas fa-times-circle' : 'fas fa-check-circle';
    document.getElementById('toastMsg').textContent = msg;
    setTimeout(() => toast.classList.remove('show'), 3000);
}

// ========== NOTIFICATIONS ==========
function playNotifSound() {
    try { document.getElementById('notifSound').play(); } catch(e) {}
}

function showBrowserNotif(order) {
    if ('Notification' in window && Notification.permission === 'granted') {
        new Notification('ğŸ” Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯!', {
            body: `${order.customer.name} - ${order.total} Ø±.Ø³`,
            icon: 'https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=100',
            tag: 'new-order'
        });
    }
}

function checkNewOrders() {
    const currentOrders = JSON.parse(localStorage.getItem('chef_orders')) || [];
    if (currentOrders.length > lastOrderCount) {
        const newOrder = currentOrders[0];
        playNotifSound();
        showBrowserNotif(newOrder);
        showToast('ğŸ”” Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† ' + newOrder.customer.name + '!');
        loadDashboard();
    }
    lastOrderCount = currentOrders.length;
}

window.addEventListener('storage', (e) => {
    if (e.key === 'chef_new_order') {
        setTimeout(() => checkNewOrders(), 100);
    }
});

// ========== INIT ==========
document.addEventListener('DOMContentLoaded', () => {
    if (!checkAccess()) return;
    
    loadDashboard();
    
    if ('Notification' in window && Notification.permission === 'default') {
        Notification.requestPermission();
    }
    
    const info = JSON.parse(localStorage.getItem('chef_restaurant_info'));
    if (info) {
        document.getElementById('restaurantName').value = info.name || '';
        document.getElementById('restaurantPhone').value = info.phone || '';
        document.getElementById('restaurantAddress').value = info.address || '';
    }
    
    setInterval(checkNewOrders, 3000);
});

document.addEventListener('keydown', e => {
    if (e.key === 'Escape') {
        closeModal('orderModal');
        closeModal('addItemModal');
        closeModal('addAdminModal');
    }
});
</script>

</body>
</html>
